
user nginx;
worker_processes auto;
error_log /var/log/nginx/error.log;
pid /run/nginx.pid;
# Load dynamic modules. See /usr/share/nginx/README.dynamic.
include /usr/share/nginx/modules/*.conf;
events {
    worker_connections 1024;
}
http {
    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';
    access_log  /var/log/nginx/access.log  main;
    sendfile            on;
    tcp_nopush          on;
    tcp_nodelay         on;
    keepalive_timeout   65;
    types_hash_max_size 2048;
    include             /etc/nginx/mime.types;
    default_type        application/octet-stream;
    # Load modular configuration files from the /etc/nginx/conf.d directory.
    # See http://nginx.org/en/docs/ngx_core_module.html#include
    # for more information.
    include /etc/nginx/conf.d/*.conf;

  server {
            listen       80 default_server;
            listen       [::]:80 default_server;                                             
            # domains and IP address you want to serve 
            server_name 192.168.56.10;
            index index.html; 
            root /usr/share/nginx/html/;
                   
            access_log /var/log/nginx/nginx_access.log;         # set your logs 
           
            # note: uses diff logs for diff sub domains
            error_log /var/log/nginx/nginx_error.log;          

        location / {                                             
                    # requests on '/' will be proxy_pass 
                    #proxy server for sending data to node.js
                    #proxy_pass http://localhost;
                    try_files $uri$args $uri$args/ /index.html;
  
        }

        location /api {
            proxy_pass http://backend:8080;
            proxy_redirect     off;
            proxy_set_header   Host             $host;
            proxy_set_header   X-Real-IP        $remote_addr;
            proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;
        }

        location ~* \.(jpg|jpeg|gif|png|ico|css|zip|tgz|gz|rar|bz2|doc|xls|exe|pdf|ppt|txt|tar|wav|bmp|rtf|js)$ {
            access_log      off;
            expires           max;
        }
    }

}
